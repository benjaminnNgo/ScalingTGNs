from seaborn import kdeplot

from script.bao_util import compute_reocurrence_surprise_from_datasets, plot_hist
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
import seaborn as sns
import statistics as stat
# TGS_available_dataset = pd.read_csv('../data/data_package/datasets_package_64.txt').iloc[:,0].tolist()
# reoccurrence_list, surprise_list = compute_reocurrence_surprise_from_datasets(TGS_available_dataset)
#
# # plot_hist(reoccurrence_list)
# # plot_hist(surprise_list)
# print(reoccurrence_list)
# print(surprise_list)

reoccurrence_list = [0.025141180489961616, 0.0005766569275718899, 0.0024254416058976528, 0.006376540667279237, 0.0026766595289079227, 0.03816890053411267, 0.001109365968155358, 0.015326821938392186, 0.0030392768079800497, 0.012575469874586407, 0.005257801899592945, 0.002814754002228347, 0.008712774122117236, 0.0024022848398031907, 0.030700840452872125, 0.004379443097793983, 0.004353373864745177, 0.002092138929333767, 0.004517659399473138, 0.00953195127163924, 0.000550357732526142, 0.007734574598397088, 0.0047814207650273225, 0.004051055210520829, 0.004892598309829675, 0.004616116547299122, 0.0030623908214539885, 0.009806668534603531, 0.004421694322189114, 0.044317749904979095, 0.0537857994399623, 0.019208392589993167, 0.007348620962728952, 0.06029490486155044, 0.004254960610018115, 0.005063112491068987, 0.0019507157405548065, 0.008308563905124779, 0.006192138412505691, 0.12427706179698529, 0.03346774193548387, 0.00385107329551774, 0.07737342343970222, 0.018480797793337576, 0.003420535883955153, 0.09952724558347847, 0.006857792794299669, 0.0052986250747241994, 0.0025245098039215685, 0.01781866209421415, 0.004145153079776016, 0.00467321237582263, 0.009775040171397964, 0.031352633939551774, 0.011618206913288135, 0.012931850200811657, 0.0057726965532777655, 0.0012399280761977666, 0.0053996086694762194, 0.003218827502506464, 0.0032553334614645398, 0.059510231465951025, 0.006377291089773559]
print(len(reoccurrence_list))
surprise_list = [0.6966537342386033, 0.9861878453038674, 0.9816180916676744, 0.9151828047624065, 0.8662041625371655, 0.550978067575578, 0.9235104669887279, 0.8298582151793161, 0.875717017208413, 0.9067217677321413, 0.8702566964285714, 0.911275415896488, 0.8476682798064232, 0.8885678910441601, 0.48030570252792476, 0.9104353259737554, 0.7314814814814815, 0.9255533199195171, 0.9641030498200417, 0.8173628173628174, 0.9723756906077348, 0.9583568871302054, 0.6884272997032641, 0.9342995169082126, 0.6929392446633826, 0.9517667607147655, 0.8985351911396927, 0.9291600404799769, 0.9317150395778364, 0.40525376179546035, 0.6280318282043907, 0.9115194827292836, 0.9501011853136745, 0.7568681318681318, 0.7866385001320306, 0.8788262613468439, 0.9089204393249397, 0.9556159420289855, 0.7917304747320061, 0.4383618028400906, 0.5146198830409356, 0.7232767232767233, 0.8148724600086468, 0.8600803212851406, 0.8914209115281502, 0.7348359297315213, 0.9533242258652095, 0.8889521640091116, 0.8130671506352087, 0.7309307207837649, 0.8836338890779176, 0.8631489841986456, 0.7967382657120128, 0.8744641408874986, 0.5903743315508021, 0.8959742895805142, 0.9149377593360996, 0.940648854961832, 0.5952045133991537, 0.5933333333333334, 0.85980341438179, 0.8760134190662566, 0.9751157678095327]
#
novelty_list = [0.5418744898434803, 0.32207179505897277, 0.7418105777193522, 0.5643760995941047, 0.7188745928591548,
                0.6055158907625077, 0.6083807061830401, 0.5723083033764368, 0.6146693787658013, 0.7802306772593728,
                0.44343355520964295, 0.5098941051527629, 0.6142957936883895, 0.66065098086617, 0.41166642139004167,
                0.5564557459033386, 0.66859944899913, 0.5851546571448722, 0.4727316948709146, 0.6124218711241227,
                0.45200766451458957, 0.6678718080105143, 0.6938814531006511, 0.38842054693334527, 0.5433556715604154,
                0.5127050556873284, 0.5309931731993756, 0.34905261209413, 0.5497356354289427, 0.5399108597596828,
                0.4948435485555489, 0.670266153725931, 0.5134990427231649, 0.4694336994884835, 0.5281713152390323,
                0.5029704255005754, 0.26827364354737404, 0.4377420289842502, 0.3756763851423664, 0.3620069758836139,
                0.3529932581813898, 0.6475700795241719, 0.4213217800058823, 0.4784812576150099, 0.529601106212463,
                0.5958842820388343, 0.5959145933977384, 0.5618569260486547, 0.4555130435139564, 0.6218983391293296,
                0.32103629860206107, 0.5398708725424576, 0.604410906380329, 0.37361547077922075, 0.28308075209618133,
                0.5626149795027369, 0.6230150316839287, 0.5795485398713922, 0.4812983342347861, 0.5547294938990228,
                0.6424906004722827, 0.34472409868313364, 0.3281110249390736, 0.2782353557329941, 0.37234395864523634,
                0.44408646931143, 0.37609186189926175, 0.5308568063414159, 0.3780102456806748, 0.7182398181525892,
                0.5696267104650846, 0.3162559108915809, 0.6054359749985431, 0.5880379398036776, 0.45153987084799435,
                0.46336040710354864, 0.4707126085675954, 0.32651263620921467, 0.4099843292405642, 0.6137012422036509,
                0.43208120068268935, 0.3968607383860717, 0.37138502462063483, 0.35648972968107745, 0.3337462930636086,
                0.34243183613504, 0.5331459337010732, 0.44722276833478314, 0.43668106542187846, 0.4765108917406358,
                0.3417126297698627, 0.6223998485826755, 0.5761143138629299, 0.4604594778396346, 0.17722119719467352,
                0.47904936697869904, 0.46383422101018634, 0.3928558943180653, 0.5208407549997731, 0.7212884032776103,
                0.5847816088018846, 0.4287901798221814, 0.3383606246125721, 0.496918158766791, 0.4838753837109654,
                0.462588603186046, 0.3992145328381311, 0.26708247128607276, 0.42946982086056124, 0.5043727917808228,
                0.3986478839301026, 0.4285076993797838, 0.4119174417094786, 0.35499046235922127, 0.34158719676049365,
                0.4276014632955398, 0.526159164026284, 0.38404307968561, 0.49815663430187784, 0.45760262906890325,
                0.30780675520201795, 0.47786774350311306, 0.4789830198961894, 0.4591153478592862, 0.48286487055461524,
                0.3903007790901604, 0.6224847516257791, 0.4834872433948639, 0.4597984325440194, 0.5248557445427429,
                0.5229576023144499, 0.2818258303629016, 0.4726887176188468, 0.4807347882461343, 0.5011656390142134,
                0.5179917681397906, 0.300348491102215, 0.4964794313782582, 0.37352034173834164, 0.019287634408602143,
                0.439871798014306, 0.3486852874800765, 0.3953711299296699, 0.3082964037174871, 0.4626441619872475,
                0.3784069525598767, 0.48491598455233337, 0.4605075519489861, 0.3918412690527254, 0.6974249500428574,
                0.38195527793054307, 0.6307823613083481, 0.3890449670627689, 0.4087928714424754, 0.45407765587869614,
                0.42258108978764125, 0.43061516678287154, 0.43323456053514453, 0.5167659749928648, 0.4004138448724532,
                0.3298561659339704, 0.35450536845238323, 0.6338432621966378, 0.2984647033032623, 0.47977033181316775,
                0.37348175934261646, 0.5263234880392772, 0.6576033843342736, 0.48831366162196105, 0.3050786027468542,
                0.4918051922789208, 0.42046517763087365, 0.39348720060129067, 0.1747360401171153, 0.40647750974827807,
                0.37071548413803906, 0.6867895723163943, 0.41798458134089944, 0.4344363515580011, 0.49075641075383447,
                0.7828772327168704, 0.40483978318404495, 0.43678221380332377, 0.40604048380299196, 0.38942268729888335,
                0.4798975165124226, 0.49042622586642237, 0.551279357989538, 0.43441270453486935, 0.48685541540360494,
                0.49391883727293545, 0.5652277591342617, 0.48436529681978757, 0.3812426357359202, 0.3446778230976666,
                0.43537054099313843, 0.42280636749902606, 0.3683258691168834, 0.5615052690348623, 0.4115755820619301,
                0.3076981713452212, 0.3597356747453934, 0.6008318248825071, 0.35697453844338967, 0.4768567526265519,
                0.44333921360913925, 0.43376523280722, 0.398006537077981, 0.45872799528064506, 0.7489579625576195,
                0.5641381009456194, 0.5196268348131997, 0.47161092223451917, 0.44719838543584683, 0.4243977075505455,
                0.4480320755042932, 0.4353729543200269, 0.21289228456091733, 0.33221854179703614, 0.3809444291526117,
                0.6592357254552675, 0.3387293924078797, 0.3585225554945872, 0.42329816026140943, 0.37426693372422626,
                0.30972634105146096, 0.2535922104183639, 0.37472711987919305, 0.46835731440649286, 0.32984529758408554,
                0.48773094759645147, 0.4822070140371915, 0.5017875836515757, 0.45602355210622875, 0.40099391103887017,
                0.5539428933744256, 0.3554756334749179, 0.3478285509206341, 0.4272280952009791, 0.320654552063842,
                0.4339457147537051, 0.22983596510847282, 0.37951387474775194, 0.2241722373695693, 0.5068323281838146,
                0.2762084853393078, 0.5224860981483396, 0.3952854683507053, 0.546251861311578, 0.4531740915893975,
                0.6173391287411408, 0.4652309340366941, 0.43335571542885004, 0.3584771606148736, 0.43847955045202225,
                0.44810409840828636, 0.43094815385748825, 0.463886752437047, 0.4634337630264745, 0.49370023806608365,
                0.5281903566756773, 0.3339053680122067, 0.484470458428421, 0.3982283294114784, 0.3589305320126655,
                0.5668682025476977, 0.46179144593948707, 0.5502333159384324, 0.3870849807108505, 0.473236496684864,
                0.45797998850763444, 0.40418119045040984, 0.4347444218193582, 0.48655300620900394]

# fig, ax = plt.subplots()

# plt.figure(figsize=(10, 6))  # Width, height in inches
#
# df = pd.read_csv('TGS_stats.csv')
# # sns.set(font_scale=2)  # You can adjust the scale as needed
# g = sns.histplot(novelty_list,log_scale=False, bins=50,kde=True,line_kws={'linewidth':6,'color':'red'} )
# # sns.kdeplot(df['transaction_count'].to_list(), color='red',log_scale=True,cumulative=False)
#
# # ax = sns.histplot(novelty_list, bin = 50, kde=False)
# # sns.kdeplot(novelty_list, color='crimson', ax=ax)
#
# g.set_xlabel("Novelty score",fontsize= 20)
# g.set_ylabel('Frequency',fontsize= 20)
# # plt.title("Number of unique nodes distribution")
# plt.savefig("../pic/novelty_distribution_TGS.pdf")
#
# plt.show()

df = pd.read_csv('TGS_stats.csv')
nodes = df['node_count'].tolist()
transactions = df['transaction_count'].tolist()
length = df['age'].tolist()

print("Nodes:",stat.mean(nodes),stat.stdev(nodes))
print("Transactions:",stat.mean(transactions),stat.stdev(transactions))
print("Length:",stat.mean(length),stat.stdev(length))

